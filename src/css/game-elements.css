/* Game Elements */
.element {
    position: absolute;
    z-index: 4;
}

/* --- Mystery Block --- */
.mystery-block {
    width: 64px;
    height: 64px;
    background: #e75c00;
    box-shadow: 
        inset 4px 4px 0px #ffb458,
        inset -4px -4px 0px #8b3800,
        4px 4px 0px #000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.mystery-block.empty {
    background: #6D4E33;
    box-shadow: 
        inset 4px 4px 0px #9C724C,
        inset -4px -4px 0px #422D1D,
        4px 4px 0px #000;
}

.mystery-block .question-mark {
    font-family: 'Pixelify Sans', sans-serif;
    font-size: 40px;
    color: #fff;
    text-shadow: 2px 2px #000;
    animation: flash 0.5s infinite alternate;
}

.mystery-block.empty .question-mark {
    display: none;
}

.mystery-block.bounce {
    animation: block-bounce 0.2s ease-out;
}

@keyframes block-bounce {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
}

@keyframes flash {
    0% { opacity: 1; }
    100% { opacity: 0.5; }
}

/* --- Pixel Star --- */
.pixel-star {
    width: 40px;
    height: 40px;
    background: #ffd700;
    box-shadow: 
        inset 4px 4px 0 #fff,
        inset -4px -4px 0 #d4af37,
        2px 2px 0 #000;
    /* Pixel shape using clip-path is okay, but box-shadow art is more retro 
       Simplifying to a shiny square for now or reusing clip-path with pixel border logic is hard. 
       Let's stick to the shape but add a hard border. */
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    transition: transform 0.5s ease, opacity 0.5s;
    pointer-events: none; /* Initially non-interactive until popped */
}

.pixel-star.hidden {
    display: none;
}

.pixel-star.popped {
    display: block;
    animation: star-emerge 1s forwards;
    pointer-events: auto;
}

.pixel-star.collected {
    transform: scale(1.5) rotate(360deg);
    opacity: 0;
}

@keyframes star-emerge {
    0% { transform: translateY(0) scale(0); opacity: 0; }
    50% { transform: translateY(-60px) scale(1.2); opacity: 1; }
    100% { transform: translateY(-50px) scale(1); } /* Floats above block */
}

/* --- Pixel Pipe --- */
.pixel-pipe {
    width: 80px;
    height: 100px;
    /* Hard Gradient for cylinder look */
    background: 
        linear-gradient(90deg, 
            #000 4px, /* Border Left */
            #78c068 4px, #78c068 15%, /* Highlight */
            #00a800 15%, #00a800 50%, /* Mid */
            #005d00 50%, #005d00 95%, /* Shadow */
            #000 95% /* Border Right */
        );
    position: relative;
    border: none;
}

/* Pipe Rim */
.pixel-pipe::before {
    content: '';
    position: absolute;
    top: -30px;
    left: -5px; /** Wider than stem **/
    width: 90px; 
    height: 30px;
    background: 
        linear-gradient(90deg, 
            #000 4px, 
            #78c068 4px, #78c068 15%, 
            #00a800 15%, #00a800 50%, 
            #005d00 50%, #005d00 95%, 
            #000 95%
        );
    border-bottom: 4px solid #000;
    border-top: 4px solid #000;
}

/* --- Pixel Portal (Blue-Green Retro Style) --- */
.pixel-portal {
    width: 60px;
    height: 90px;
    background: #000;
    /* Pixel Art Frame using box-shadow */
    box-shadow: 
        inset 4px 4px 0 #00ffff, /* Cyan */
        inset -4px -4px 0 #008080, /* Teal */
        4px 4px 0 #000,
        0 0 10px #00ffff;
    animation: portal-pulse 1.5s infinite alternate;
    position: absolute;
    overflow: hidden;
}

.pixel-portal::after {
    content: '';
    position: absolute;
    top: 4px;
    left: 4px;
    right: 4px;
    bottom: 4px;
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 255, 255, 0.2) 0px,
        rgba(0, 255, 255, 0.2) 2px,
        transparent 2px,
        transparent 4px
    );
    animation: scanline 1s linear infinite;
}

@keyframes portal-pulse {
    0% { transform: scale(1); box-shadow: inset 4px 4px 0 #00ffff, inset -4px -4px 0 #008080, 0 0 10px #00ffff; }
    100% { transform: scale(1.05); box-shadow: inset 4px 4px 0 #e0ffff, inset -4px -4px 0 #00ced1, 0 0 20px #00ffff; }
}

@keyframes scanline {
    from { background-position: 0 0; }
    to { background-position: 0 20px; }
}
