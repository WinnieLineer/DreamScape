/* Game Elements */
.element {
    position: absolute;
    z-index: 4;
}

/* --- Mystery Block --- */
.mystery-block {
    width: 64px;
    height: 64px;
    background: #e75c00;
    box-shadow: 
        inset 4px 4px 0px #ffb458,
        inset -4px -4px 0px #8b3800,
        4px 4px 0px #000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.mystery-block.empty {
    background: #6D4E33;
    box-shadow: 
        inset 4px 4px 0px #9C724C,
        inset -4px -4px 0px #422D1D,
        4px 4px 0px #000;
}

.mystery-block .question-mark {
    font-family: 'Pixelify Sans', sans-serif;
    font-size: 40px;
    color: #fff;
    text-shadow: 2px 2px #000;
    animation: flash 0.5s infinite alternate;
}

.mystery-block.empty .question-mark {
    display: none;
}

.mystery-block.bounce {
    animation: block-bounce 0.2s ease-out;
}

@keyframes block-bounce {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
}

@keyframes flash {
    0% { opacity: 1; }
    100% { opacity: 0.5; }
}

/* --- Pixel Star --- */
.pixel-star {
    width: 40px;
    height: 40px;
    background: #ffd700;
    box-shadow: 
        inset 4px 4px 0 #fff,
        inset -4px -4px 0 #d4af37,
        2px 2px 0 #000;
    /* Pixel shape using clip-path is okay, but box-shadow art is more retro 
       Simplifying to a shiny square for now or reusing clip-path with pixel border logic is hard. 
       Let's stick to the shape but add a hard border. */
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    transition: transform 0.5s ease, opacity 0.5s;
    pointer-events: none; /* Initially non-interactive until popped */
}

.pixel-star.hidden {
    display: none;
}

.pixel-star.popped {
    display: block;
    animation: star-emerge 1s forwards;
    pointer-events: auto;
}

.pixel-star.collected {
    transform: scale(1.5) rotate(360deg);
    opacity: 0;
}

@keyframes star-emerge {
    0% { transform: translateY(0) scale(0); opacity: 0; }
    50% { transform: translateY(-60px) scale(1.2); opacity: 1; }
    100% { transform: translateY(-50px) scale(1); } /* Floats above block */
}

/* --- Pixel Pipe --- */
/* --- Pixel Pipe --- */
/* --- Pixel Pipe (Large) --- */
.pixel-pipe {
    width: 160px; /* 80 * 2 */
    height: 200px; /* 100 * 2 */
    background-color: #00a800; /* Fallback */
    /* Hard Gradient for cylinder look */
    background: 
        linear-gradient(90deg, 
            #000 8px, 
            #78c068 8px, #78c068 15%, 
            #00a800 15%, #00a800 50%, 
            #005d00 50%, #005d00 95%, 
            #000 95% 
        );
    position: absolute; 
    border: none;
    z-index: 10; 
}

/* Pipe Rim (Large) */
.pixel-pipe::before {
    content: '';
    position: absolute;
    top: -60px; /* 30 * 2 */
    left: -10px; /* Wider than stem */
    width: 180px; /* 90 * 2 */
    height: 60px; /* 30 * 2 */
    background-color: #00a800;
    background: 
        linear-gradient(90deg, 
            #000 8px, 
            #78c068 8px, #78c068 15%, 
            #00a800 15%, #00a800 50%, 
            #005d00 50%, #005d00 95%, 
            #000 95%
        );
    border-bottom: 8px solid #000;
    border-top: 8px solid #000;
    z-index: 11;
}

/* --- Pixel Portal (GIF Style - Large) --- */
.pixel-portal {
    width: 300px; 
    height: 300px; 
    background: url('../assets/images/portal.gif') no-repeat center center;
    background-size: contain;
    mix-blend-mode: screen; 
    position: absolute;
    z-index: 5;
}

/* Remove old CSS drawing */
.pixel-portal::after {
    display: none;
}

/* --- Pixel Mushroom (Poison) --- */
.pixel-mushroom {
    width: 40px;
    height: 40px;
    background: #8b008b; /* Dark Magenta */
    /* Simple mushroom shape via clip-path */
    clip-path: polygon(
        15% 40%, 15% 0%, 85% 0%, 85% 40%, /* Cap top */
        100% 40%, 100% 60%, 80% 60%, 80% 100%, /* Cap bottom / Stem */
        20% 100%, 20% 60%, 0% 60%, 0% 40%
    );
    transition: transform 0.3s;
    pointer-events: none;
    z-index: 4;
    /* Adding dots to cap via background gradient */
    background: radial-gradient(circle at 30% 20%, #fff 2px, transparent 3px),
                radial-gradient(circle at 70% 30%, #fff 2px, transparent 3px),
                #8b008b;
}

.pixel-mushroom.hidden {
    display: none;
}

.pixel-mushroom.popped {
    display: block;
    animation: mushroom-emerge 1s forwards;
    pointer-events: auto;
}

@keyframes mushroom-emerge {
    0% { transform: translateY(0) scale(0); opacity: 0; }
    50% { transform: translateY(-60px) scale(1); opacity: 1; }
    100% { transform: translateY(-50px) scale(1); } /* Floats above block */
}

/* Character Tiny State - Visual cue & Size */
.character.tiny {
    width: 85px !important; /* Half size */
    height: 128px !important; /* Half size */
    filter: sepia(100%) hue-rotate(240deg) saturate(200%); /* Blue/Purple Tint to indicate Poison */
}

